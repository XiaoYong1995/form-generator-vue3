import{a as e,E as t,r as l,w as a,b as o,d as n,p as r,c as i,e as s,f as u,g as d,h as c,F as m,n as p,o as f,i as _,j as g,k as h,t as b,l as v,m as y,q as k,s as I,u as w,v as V,x,y as D,z as S,A as C,C as j,B as N,D as U,G as L,I as z,M as O,V as R,H as T,J as $,_ as B,K as E,L as M,N as F,O as A,P as W,Q as P,R as q,S as G,T as J,U as Z,W as K,X}from"./vendor.b7a720f7.js";function H(){return`field_${function(e){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",l="",a=e;a>0;--a)l+=t[Math.floor(Math.random()*t.length)];return l}(5)}`}function Q(e){const t=Object.prototype.toString;if(!e||"object"!=typeof e)return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if("[object Date]"===t.call(e))return new Date(e.getTime());if("[object RegExp]"===t.call(e)){const t=[];return e.global&&t.push("g"),e.multiline&&t.push("m"),e.ignoreCase&&t.push("i"),new RegExp(e.source,t.join(""))}const l=Array.isArray(e)?[]:e.constructor?new e.constructor:{};for(const a in e)l[a]=Q(e[a]);return l}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const l of e)if("childList"===l.type)for(const e of l.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Y=Function.prototype.call.bind(Object.prototype.toString);function ee(e){return"[object Object]"===Y(e)}function te(e){return"[object Array]"===Y(e)}const le=function(e,t){for(let l of e){if(l.__ID==t)return l;if(te(l.childrens)){let e=le(l.childrens,t);if(e)return e}}return!1};e.defaults.timeout=1e4,e.defaults.baseURL="",e.interceptors.request.use((function(e){let t=localStorage.getItem("token");return t&&(e.headers["security-hash"]=t),e}),(function(e){return t.error("请求错误，请重试"),Promise.reject(e)}));class ae{static Callback(e,l){0!==e.data.code?t.error(e.data.data.msg):l(e.data)}static Get(t,l){return new Promise(((a,o)=>{e.get(t,{params:l}).then((e=>{ae.Callback(e,a)})).catch((e=>{o(e)}))}))}static Post(t,l,a){return new Promise(((o,n)=>{e.post(t,l,a).then((e=>{ae.Callback(e,o)})).catch((e=>{n(e)}))}))}}const oe={default:function(e,t){for(let l of t){let t={};t.tag=e.__opt__.tag,t.attrs={label:l.value},t.slots={default:l.key},e.childrens.value.push(t)}},"el-option":function(e,t){for(let l of t){let t={};t.tag=e.__opt__.tag,t.attrs={value:l.value,label:l.key},e.childrens.value.push(t)}}},ne=function(e){if("[object Number]"===Y(e)||function(e){return"[object String]"===Y(e)}(e)||function(e){return"[object Undefined]"===Y(e)}(e))return e;const t={};for(let l in e)ee(e[l])?"__val__"in e[l]?t[l]=e[l].__val__:0==["name","tagIcon","__formId","rule"].includes(l)&&(t[l]=ne(e[l])):te(e[l])?t[l]=e[l].map((e=>ne(e))):0==["name","tagIcon","__formId","rule"].includes(l)&&(t[l]=e[l]);if(Object.keys(e).indexOf("events")>-1&&Object.keys(e.events)&&(t.events=e.events),"slots"in t)for(let l in t.slots)t.slots[l]||delete t.slots[l];if("props"in t&&(t.attrs=Object.assign(t.attrs,t.props),delete t.props),te(t.childrens)?t.childrens=o(t.childrens):t.childrens=o([]),"__text"in t&&(t.slots.default=t.__text),"__opt__"in t){let e="static"==t.__opt__.type?t.__opt__.staticData:t.__opt__.dynamicData,l=t.__opt__.tag in oe?oe[t.__opt__.tag]:oe.default;"static"==t.__opt__.type?l(t,e):ae.Get(e.url).then((e=>{l(t,e.data)}))}return console.log(t,"--c"),t};const re=["platform-eleme","eleme","delete-solid","delete","s-tools","setting","user-solid","user","phone","phone-outline","more","more-outline","star-on","star-off","s-goods","goods","warning","warning-outline","question","info","remove","circle-plus","success","error","zoom-in","zoom-out","remove-outline","circle-plus-outline","circle-check","circle-close","s-help","help","minus","plus","check","close","picture","picture-outline","picture-outline-round","upload","upload2","download","camera-solid","camera","video-camera-solid","video-camera","message-solid","bell","s-cooperation","s-order","s-platform","s-fold","s-unfold","s-operation","s-promotion","s-home","s-release","s-ticket","s-management","s-open","s-shop","s-marketing","s-flag","s-comment","s-finance","s-claim","s-custom","s-opportunity","s-data","s-check","s-grid","menu","share","d-caret","caret-left","caret-right","caret-bottom","caret-top","bottom-left","bottom-right","back","right","bottom","top","top-left","top-right","arrow-left","arrow-right","arrow-down","arrow-up","d-arrow-left","d-arrow-right","video-pause","video-play","refresh","refresh-right","refresh-left","finished","sort","sort-up","sort-down","rank","loading","view","c-scale-to-original","date","edit","edit-outline","folder","folder-opened","folder-add","folder-remove","folder-delete","folder-checked","tickets","document-remove","document-delete","document-copy","document-checked","document","document-add","printer","paperclip","takeaway-box","search","monitor","attract","mobile","scissors","umbrella","headset","brush","mouse","coordinate","magic-stick","reading","data-line","data-board","pie-chart","data-analysis","collection-tag","film","suitcase","suitcase-1","receiving","collection","files","notebook-1","notebook-2","toilet-paper","office-building","school","table-lamp","house","no-smoking","smoking","shopping-cart-full","shopping-cart-1","shopping-cart-2","shopping-bag-1","shopping-bag-2","sold-out","sell","present","box","bank-card","money","coin","wallet","discount","price-tag","news","guide","male","female","thumb","cpu","link","connection","open","turn-off","set-up","chat-round","chat-line-round","chat-square","chat-dot-round","chat-dot-square","chat-line-square","message","postcard","position","turn-off-microphone","microphone","close-notification","bangzhu","time","odometer","crop","aim","switch-button","full-screen","copy-document","mic","stopwatch","medal-1","medal","trophy","trophy-1","first-aid-kit","discover","place","location","location-outline","location-information","add-location","delete-location","map-location","alarm-clock","timer","watch-1","watch","lock","unlock","key","service","mobile-phone","bicycle","truck","ship","basketball","football","soccer","baseball","wind-power","light-rain","lightning","heavy-rain","sunrise","sunrise-1","sunset","sunny","cloudy","partly-cloudy","cloudy-and-sunny","moon","moon-night","dish","dish-1","food","chicken","fork-spoon","knife-fork","burger","tableware","sugar","dessert","ice-cream","hot-water","water-cup","coffee-cup","cold-drink","goblet","goblet-full","goblet-square","goblet-square-full","refrigerator","grape","watermelon","cherry","apple","pear","orange","coffee","ice-tea","ice-drink","milk-tea","potato-strips","lollipop","ice-cream-square","ice-cream-round"].map((e=>`el-icon-${e}`)),ie=n({name:"input-icon",props:["modelValue"],emits:["update:modelValue"],setup(e,t){const l=o(""),n=o(!1),r=o(e.modelValue);a(l,(()=>{this.iconList=l?re.filter((e=>e.indexOf(l)>-1)):re}));return{iconList:re,key:l,onOpen:function(){this.key="",this.scrollToActive()},scrollToActive:async function(){await p();const e=document.getElementsByClassName("active-item")[0];e&&e.scrollIntoView&&e.scrollIntoView()},onSelect:function(e){r.value=e,t.emit("update:modelValue",e)},setIcon:r,dialogTableVisible:n}}});r("data-v-3c4303cc");const se={slot:"title"},ue=v(" 选择图标 "),de={ref:"iconWrap",class:"icon-ul"},ce=["onClick"],me=v("选择");i(),ie.render=function(e,t,l,a,o,n){const r=s("el-input"),i=s("el-dialog"),p=s("el-button");return f(),u(m,null,[d(i,{modelValue:e.dialogTableVisible,"onUpdate:modelValue":t[1]||(t[1]=t=>e.dialogTableVisible=t),width:"980px",onOpen:e.scrollToActive},{default:c((()=>[_("div",se,[ue,d(r,{modelValue:e.key,"onUpdate:modelValue":t[0]||(t[0]=t=>e.key=t),size:"mini",style:{width:"260px"},placeholder:"请输入图标名称","prefix-icon":"el-icon-search",clearable:""},null,8,["modelValue"])]),_("ul",de,[(f(!0),u(m,null,g(e.iconList,(t=>(f(),u("li",{key:t,class:h(e.setIcon===t?"active-item":""),onClick:l=>e.onSelect(t)},[_("i",{class:h(t)},null,2),_("div",null,b(t),1)],10,ce)))),128))],512)])),_:1},8,["modelValue","onOpen"]),d(r,{modelValue:e.setIcon,"onUpdate:modelValue":t[3]||(t[3]=t=>e.setIcon=t),placeholder:"请输入内容",size:"mini"},{append:c((()=>[d(p,{icon:e.setIcon,onClick:t[2]||(t[2]=t=>e.dialogTableVisible=!0)},{default:c((()=>[me])),_:1},8,["icon"])])),default:c((()=>[v(b(e.dialogTableVisible)+" ",1)])),_:1},8,["modelValue"])],64)},ie.__scopeId="data-v-3c4303cc";const pe=n({name:"element-render",components:{InputIcon:ie},emits:["update","updateChild","rm","deleteItem","copyItem"],props:{eleName:String,formItem:Object,validator:e=>!0,__ID:String,tag:String,attrs:Object,events:{type:Object,default:{}},slots:Object,ctrlBtn:Boolean,currentID:String,childrens:Array,defaultvalue:{default:void 0}},setup(e,t){const l=y("copyItem"),n=y("deleteItem"),r=y("hightLight"),i=y("updateChild"),s=y("selected"),u=e.events,d=o(e.defaultvalue);console.log(e.defaultvalue,"props.defaultvalue"),a(d,(()=>{if("draggable"==e.tag)return console.log(d.value,"====",e.__ID),void i(d.value,e.__ID);t.emit("update",d.value,e.eleName,e.__ID)}));const c=k((()=>![!1,void 0].includes(e.formItem)&&(e.formItem&&e.formItem.showLabel?{label:e.formItem.label,labelWidth:e.formItem.labelWidth,prop:e.__ID}:{})));return{vm:d,formItemSet:c,deleteItem:n,copyItem:l,selected:s,updateChild:i,editModelValue:function(e){console.log(e),d.value=e},events:u,changeValue:function(e,l,a){t.emit("update",e,l,a)},hightLight:r}}}),fe=[_("i",{class:"el-icon-delete"},null,-1)],_e=[_("i",{class:"el-icon-copy-document"},null,-1)];pe.render=function(e,t,l,a,o,n){const r=s("element-render",!0),i=s("el-form-item");return e.formItemSet?(f(),I(i,w({key:0},e.formItemSet,{style:e.hightLight(e.__ID)}),{default:c((()=>[e.ctrlBtn?(f(),u(m,{key:0},[_("span",{class:"tool-btn tool-btn-del _btn",onClick:t[0]||(t[0]=t=>e.deleteItem(e.__ID)),title:"删除"},fe),_("span",{class:"tool-btn tool-btn-copy _btn",onClick:t[1]||(t[1]=t=>e.copyItem(e.__ID)),title:"复制"},_e)],64)):S("",!0),(f(),I(D(e.tag),w(e.attrs,x(e.events),{modelValue:e.vm,"onUpdate:modelValue":e.editModelValue}),V({default:c((()=>[(f(!0),u(m,null,g(e.childrens,((t,l)=>(f(),I(r,w({key:"son"+l,currentID:e.currentID},t),null,16,["currentID"])))),128))])),_:2},[g(e.slots,((e,t)=>({name:t,fn:c((()=>[v(b(e),1)]))})))]),1040,["modelValue","onUpdate:modelValue"]))])),_:1},16,["style"])):(f(),I(D(e.tag),w({key:1},e.attrs,{modelValue:e.vm,"onUpdate:modelValue":t[2]||(t[2]=t=>e.vm=t)},x(e.events),{style:e.hightLight(e.__ID)}),V({default:c((()=>[(f(!0),u(m,null,g(e.childrens,((t,l)=>(f(),I(r,w({key:"son"+l,currentID:e.currentID},t,{onUpdate:e.changeValue,onClick:C((l=>e.selected(t.__ID)),["stop"])}),null,16,["currentID","onUpdate","onClick"])))),128))])),_:2},[g(e.slots,((e,t)=>({name:t,fn:c((()=>[v(b(e),1)]))})))]),1040,["modelValue","style"]))};const ge=n({name:"PageGenerator",props:["modelValue"],emits:["update:modelValue"],components:{ElementRender:pe},setup(e,t){const o=y("selected"),n=y("updateDefaultValue"),r=function(e){const t=l({formConf:e.formConf,current:e.current,drawingList:e.drawingList.map((e=>ne(e)))});return a(e,(()=>{t.drawingList=e.drawingList.map((e=>ne(e)))})),t}(e.modelValue),i=l({});let s=[];const u=function(e){for(let t of e)i[t.__ID]=i[t.__ID]?i[t.__ID]:t.defaultvalue,s.push(t.__ID),te(t.childrens)&&u(t.childrens)};a(e.modelValue,(()=>{s=[],u(e.modelValue.drawingList);for(let e in i)s.includes(e)||delete i[e]}));return{onEnd:function(l){t.emit("update:modelValue",e.modelValue)},conf:r,formSetting:k((()=>{let t={};for(let l in e.modelValue.formConf.attrs)"__"!=l.substr(0,2)&&(t[l]=e.modelValue.formConf.attrs[l].__val__);t.rules=Q(e.modelValue.formConf.attrs.__rules);for(let e in t.rules)t.rules[e]=t.rules[e].map((e=>(e.pattern=new RegExp(e.pattern),e)));return t})),selected:o,changeValue:function(e,t,l){console.log(e,t,l),n(e,l),i[l]=e},formModel:i}}}),he=v("立即创建"),be=v("取消");ge.render=function(e,t,l,a,o,n){const r=s("element-render"),i=s("el-empty"),p=s("el-button"),_=s("el-form-item"),h=s("draggable"),b=s("el-form");return f(),I(b,w({model:e.formModel},e.formSetting,{gutter:e.modelValue.formConf.gutter}),{default:c((()=>[d(h,{class:"drawing-board",style:{padding:"10px",height:"100%"},list:e.modelValue.drawingList,animation:340,group:"componentsGroup",onChange:e.onEnd},{default:c((()=>[(f(!0),u(m,null,g(e.conf.drawingList,((t,l)=>(f(),I(r,w({key:t.__ID+l,onClick:C((l=>e.selected(t.__ID)),["stop"]),onUpdate:e.changeValue,currentID:e.modelValue.current},t,{class:"item-tool-box"}),null,16,["onClick","onUpdate","currentID"])))),128)),e.conf.drawingList.length<1?(f(),I(i,{key:0,description:"从左侧拖入或点选组件进行表单设计"})):(f(),u(m,{key:1},[e.conf.formConf.attrs.__formBtns.__val__?(f(),I(_,{key:0},{default:c((()=>[d(p,{type:"primary"},{default:c((()=>[he])),_:1}),d(p,null,{default:c((()=>[be])),_:1})])),_:1})):S("",!0)],64))])),_:1},8,["list","onChange"])])),_:1},16,["model","gutter"])};const ve=function(e,t){return{__val__:t,input_type:"input_text",label:e}},ye=function(e){return{type:"static",tag:e,staticData:[{key:"选项一",value:1},{key:"选项二",value:2}],dynamicData:{url:"http://",medth:"post",keyName:"keyName",valueName:"valueName"}}};var ke=ve,Ie=function(e,t){return{__val__:t,input_type:"input_icon",label:e}},we=function(e,t){return{__val__:t,input_type:"input_boolean",label:e}},Ve=function(e,t){return{__val__:t,input_type:"input_number",label:e}},xe=function(e,t){return{__val__:ye(t),input_type:"input_opt",label:e}},De=function(e,t,l){return{__val__:l,input_type:"input_radio",label:e,opts:t,__child:{tag:"el-radio-button",keyValue:{key:"label",value:"__default__"}}}},Se=function(e,t,l,a){return{__val__:a,input_type:"input_range",label:e,min:t,max:l}},Ce=function(e,t,l){return{__val__:l,input_type:"input_select",label:e,opts:t,__child:{tag:"el-option",keyValue:{key:"value",value:"label"}}}},je=function(e){const t=Q(e);return t.__ID=H(),t},Ne={__ID:"",tag:"el-button",name:"按钮",__openRules:!1,tagIcon:"button",ctrlBtn:!0,__text:ke("按钮文本","提交"),slots:{},props:{},attrs:{fieldName:ke("字段名","字段名"),size:De("尺寸",[{key:"medium",value:"medium"},{key:"small",value:"small"},{key:"mini",value:"mini"}],""),type:De("类型",[{key:"primary",value:"primary"},{key:"success",value:"success"},{key:"warning",value:"warning"},{key:"danger",value:"danger"},{key:"info",value:"info"},{key:"text",value:"text"}],""),plain:we("是否朴素按钮",!1),round:we("是否圆角按钮",!1),circle:we("是否圆形按钮",!1),loading:we("是否加载中状态",!1),disabled:we("是否禁用状态",!1),autofocus:we("是否默认聚焦",!1)}},Ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ne}),Le={__ID:"",tag:"el-divider",name:"分割线",__openRules:!1,tagIcon:"divider",__text:ke("文本内容","分割线"),slots:{},props:{},ctrlBtn:!0,attrs:{fieldName:ke("字段名","字段名"),direction:De("方向",[{key:"horizontal",value:"horizontal"},{key:"vertical",value:"vertical"}],"horizontal"),"content-position":De("对齐",[{key:"left",value:"left"},{key:"right",value:"right"},{key:"center",value:"center"}],"center")}},ze=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Le});const Oe={tag:"draggable",name:"栅格",__openRules:!1,tagIcon:"row",__ID:"",defaultvalue:[],attrs:{span:Se("列数",1,24,8),offset:Se("左侧间隔",0,24,0),push:Se("右移动",0,24,0),pull:Se("左移动",0,24,0)},props:{style:{"min-height":"60px"},component:"el-col",group:"componentsGroup",class:"drag-wrapper box",animation:340},childrens:[],ctrlBtn:!0,slots:{}};var Re={tag:"el-row",defaultvalue:[],props:{component:"el-row",group:"componentsGroup",class:"drag-wrapper box",style:{"margin-left":"0px","margin-right":"0px"},animation:340},ctrlBtn:!0,name:"布局组件",__openRules:!1,tagIcon:"input",__ID:"",attrs:{gutter:Se("栅格间隔",1,24,24),justify:De("justify",[{key:"start",value:"start"},{key:"end",value:"end"},{key:"center",value:"center"},{key:"space-around",value:"space-around"},{key:"space-between",value:"space-between"}],"start"),align:De("align",[{key:"top",value:"top"},{key:"middle",value:"middle"},{key:"bottom",value:"bottom"}])},actions:{"增加列":function(e){e.childrens.push(je(Oe))}},childrens:[je(Oe)],slots:{}},Te=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Re}),$e={tag:"draggable",defaultvalue:[],props:{component:"el-scrollbar",group:"componentsGroup",class:"drag-wrapper box",style:{"margin-left":"0px","margin-right":"0px"},animation:340},slots:{},ctrlBtn:!1,name:"滚动条",__openRules:!1,tagIcon:"input",__ID:"",attrs:{height:ke("滚动条高度","100"),"max-height":ke("滚动条最大高度",""),native:we("是否使用原生滚动条样式",!1),"wrap-style":ke("包裹容器的自定义样式",""),"wrap-class":ke("包裹容器的自定义类名",""),"view-style":ke("视图的自定义样式",""),"view-class":ke("视图的自定义类名",""),noresize:we("不响应容器尺寸变化，如果容器尺寸不会发生变化，最好设置它可以优化性能",!1),tag:ke("视图的元素标签","div"),always:we("滚动条总是显示",!1),"min-size":ke("滚动条最小尺寸","20")},childrens:[]},Be=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:$e}),Ee={tag:"el-checkbox-group",name:"复选框",__openRules:!1,tagIcon:"checkbox",__ID:"",defaultvalue:[1,2],formItem:{showLabel:we("显示 label",!0),labelWidth:Ve("label 宽",100),label:ke("label","单选框")},attrs:{fieldName:ke("字段名","字段名"),disabled:we("是否禁用",!1),border:we("占位字符",!0),size:De("尺寸",[{key:"medium",value:"中等"},{key:"small",value:"较小"},{key:"mini",value:"迷你"}],"medium")},__opt__:xe("选择项","el-checkbox-button"),props:{},childrens:[],ctrlBtn:!0},Me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ee}),Fe={tag:"el-color-picker",name:"颜色拾取",__openRules:!1,tagIcon:"color",ctrlBtn:!0,defaultvalue:"#000000",formItem:{showLabel:we("显示 label",!0),labelWidth:Ve("label 宽",100),label:ke("label","颜色拾取")},attrs:{fieldName:ke("字段名","字段名"),disabled:we("是否禁用",!1),size:De("尺寸",[{key:"medium",value:"medium"},{key:"small",value:"small"},{key:"mini",value:"mini"}],""),"show-alpha":we("是否支持透明度选择",!1),"color-format":De("写入 v-model 的颜色的格式",[{key:"hsl",value:"hsl"},{key:"hsv",value:"hsv"},{key:"hex",value:"hex"},{key:"rgb",value:"rgb"}],"rgb")},slots:{},props:{},childrens:[]},Ae=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Fe}),We={tag:"el-input",name:"单行文本",__openRules:!0,tagIcon:"input",__ID:"",defaultvalue:"",formItem:{showLabel:we("显示 label",!0),labelWidth:Ve("label 宽",100),label:ke("label","单行文本")},attrs:{fieldName:ke("字段名","字段名"),placeholder:ke("占位字符","请输入"),"prefix-icon":Ie("框头部图标",""),"suffix-icon":Ie("框头部图标",""),type:Ce("类型",[{key:"text",value:"文本"},{key:"textarea",value:"多行文本"},{key:"password",value:"密码"},{key:"number",value:"数字"}],"text")},props:{},childrens:[],ctrlBtn:!0,slots:{prefix:ke("框头部内容",""),suffix:ke("框尾部内容",""),prepend:ke("框前置内容",""),append:ke("框后置内容","")},rule:{required:we("必填",!1)}},Pe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:We}),qe={tag:"el-input-number",name:"单行文本",__openRules:!1,tagIcon:"number",__ID:"",defaultvalue:0,formItem:{showLabel:we("显示 label",!0),labelWidth:Ve("label 宽",100),label:ke("label","单行文本")},attrs:{fieldName:ke("字段名","字段名"),placeholder:ke("占位字符","请输入"),"prefix-icon":Ie("框头部图标",""),"suffix-icon":Ie("框头部图标",""),type:Ce("类型",[{key:"text",value:"文本"},{key:"textarea",value:"多行文本"},{key:"password",value:"密码"},{key:"number",value:"数字"}],"text")},props:{},childrens:[],ctrlBtn:!0,slots:{prefix:ke("框头部内容",""),suffix:ke("框尾部内容",""),prepend:ke("框前置内容",""),append:ke("框后置内容","")},rule:{required:we("必填",!1),regList:{type:"reg"}}},Ge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:qe}),Je={tag:"el-radio-group",name:"单选框",__openRules:!1,tagIcon:"radio",__ID:"",defaultvalue:"",formItem:{showLabel:we("显示 label",!0),labelWidth:Ve("label 宽",100),label:ke("label","单选框")},attrs:{fieldName:ke("字段名","字段名"),disabled:we("是否禁用",!1),border:we("占位字符",!0),size:De("尺寸",[{key:"medium",value:"中等"},{key:"small",value:"较小"},{key:"mini",value:"迷你"}],"medium")},__opt__:xe("选择项","el-radio-button"),slots:{},props:{},childrens:[],ctrlBtn:!0,rule:{}},Ze=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Je}),Ke={tag:"el-rate",name:"Rate 评分",__openRules:!0,tagIcon:"rate",defaultvalue:"",ctrlBtn:!0,formItem:{showLabel:we("显示 label",!0),labelWidth:Ve("label 宽",100),label:ke("label","Rate 评分")},attrs:{fieldName:ke("字段名","字段名"),disabled:we("是否为只读",!1),"allow-half":we("是否允许半选",!1),"show-text":we("是否显示辅助文字，若为真，则会从 texts 数组中选取当前分数对应的文字内容",!1),"show-score":we("是否显示当前分数， show-score 和 show-text 不能同时为真",!1)},slots:{},props:{},childrens:[]},Xe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ke}),He={tag:"el-select",name:"select选择",__openRules:!1,tagIcon:" select",ctrlBtn:!0,defaultvalue:"",__opt__:xe("选择项","el-option"),formItem:{showLabel:we("显示 label",!0),labelWidth:Ve("label 宽",100),label:ke("label","select选择")},attrs:{fieldName:ke("字段名","字段名"),multiple:we("是否多选",!1),disabled:we("是否禁用",!1),size:De("输入框尺寸",[{key:"medium",value:"medium"},{key:"small",value:"small"},{key:"mini",value:"mini"}],"large"),clearable:we("是否可以清空选项",!1),"collapse-tags":we("多选时是否将选中值按文字的形式展示",!1),filterable:we("是否可搜索",!1),"allow-create":we("是否允许用户创建新条目， 注意此时filterable必须为真。",!1),remote:we("是否为远程搜索",!1),loading:we("是否正在从远程获取数据",!1),"reserve-keyword":we("多选且可搜索时，是否在选中一个选项后保留当前的搜索关键词",!1),"default-first-option":we("在输入框按下回车，选择第一个匹配项。 需配合 filterable 或 remote 使用",!1),"popper-append-to-body":we("是否将弹出框插入至 body 元素。 在弹出框的定位出现问题时，可将该属性设置为 false",!0),"automatic-dropdown":we("对于不可搜索的 Select，是否在输入框获得焦点后自动弹出选项菜单",!1)},slots:{},props:{},childrens:[]},Qe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:He}),Ye={tag:"el-slider",name:"Slider 滑块",__openRules:!1,tagIcon:"slider",ctrlBtn:!0,formItem:{showLabel:we("显示 label",!0),labelWidth:Ve("label 宽",100),label:ke("label","Slider 滑块")},attrs:{fieldName:ke("字段名","字段名"),disabled:we("是否禁用",!1),"show-input":we("是否显示输入框，仅在非范围选择时有效",!1),"show-input-controls":we("在显示输入框的情况下，是否显示输入框的控制按钮",!0),"show-stops":we("是否显示间断点",!1),"show-tooltip":we("是否显示 tooltip",!0),range:we("是否为范围选择",!1),vertical:we("是否竖向模式",!1)},slots:{},props:{},childrens:[]},et=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ye}),tt={tag:"el-switch",name:"Switch 开关",__openRules:!1,tagIcon:"switch",ctrlBtn:!0,formItem:{showLabel:we("显示 label",!0),labelWidth:Ve("label 宽",100),label:ke("label","Switch 开关")},attrs:{fieldName:ke("字段名","字段名"),disabled:we("是否禁用",!1),loading:we("是否显示加载中",!1),"validate-event":we("改变 switch 状态时是否触发表单的校验",!0)},slots:{},props:{},childrens:[]},lt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:tt}),at={tag:"el-time-picker",name:"时间选择器",__openRules:!1,tagIcon:"time",ctrlBtn:!0,formItem:{showLabel:we("显示 label",!0),labelWidth:Ve("label 宽",100),label:ke("label","时间选择器")},attrs:{fieldName:ke("字段名","字段名"),readonly:we("完全只读",!1),disabled:we("禁用",!1),editable:we("文本框可输入",!0),clearable:we("是否显示清除按钮",!0),"is-range":we("是否为时间范围选择",!1),"arrow-control":we("是否使用箭头进行时间选择",!1)},slots:{},props:{},childrens:[]},ot=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:at}),nt={tag:"el-time-select",name:"时间选择",__openRules:!1,tagIcon:"time-range",defaultvalue:"",ctrlBtn:!0,formItem:{showLabel:we("显示 label",!0),labelWidth:Ve("label 宽",100),label:ke("label","TimeSelect 时间选择")},attrs:{fieldName:ke("字段名","字段名"),disabled:we("禁用",!1),editable:we("文本框可输入",!0),clearable:we("是否显示清除按钮",!0),size:De("输入框尺寸",[{key:"medium",value:"medium"},{key:"small",value:"small"},{key:"mini",value:"mini"}],"")},slots:{},props:{},childrens:[]},rt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:nt}),it={__ID:"",tag:"upload-warp",name:"上传文件",__openRules:!1,tagIcon:"input",ctrlBtn:!0,defaultvalue:"",formItem:{showLabel:we("显示 label",!0),labelWidth:Ve("label 宽",100),label:ke("label","上传文件")},attrs:{fieldName:ke("字段名","字段名"),uploadType:De("上传类型",[{value:"图片",key:"image"},{value:"文件",key:"file"}],"image"),action:ke("上传接口","https://www.vkandian.cn/index.php/index/upload"),multiple:we("多文件上传",""),name:ke("文件字段名","file"),tip:ke("上传提示",""),"show-file-list":we("是否显示文件列表",!0),drag:we("拖拽上传",!1),accept:ke("文件类型",""),"thumbnail-mode":we("显示缩略图",!1),"list-type":De("列表模式",[{key:"text",value:"text"},{key:"picture",value:"picture"},{key:"picture-card",value:"picture-card"}],"text"),"auto-upload":we("自动上传",!0),disabled:we("禁用",!1),limit:Ve("最多可上传文件",1)},slots:{},props:{},childrens:[]},st=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:it});const ut={tag:"el-form",props:{},childrens:[],__rules:{},attrs:{__formRef:ke("表单名","elForm"),__formModel:ke("表单模型","formData"),size:De("表单尺寸",[{key:"medium",value:"中等"},{key:"small",value:"较小"},{key:"mini",value:"迷你"}],"medium"),labelPosition:De("标签对齐",[{key:"right",value:"右对齐"},{key:"left",value:"右对齐"},{key:"top",value:"顶部对齐"}],"right"),labelWidth:Ve("标签宽度",100),disabled:we("禁用",!1),inline:we("行内模式",!1),hideRequiredAsterisk:we("必填标星",!1),__formBtns:we("是否显示按钮",!0)}},dt={base:{eles:[],title:"基本组件"},form:{eles:[],title:"表单组件"}};let ct={"./element/form/elCheckboxGroup.js":Me,"./element/form/elColorPicker.js":Ae,"./element/form/elInput.js":Pe,"./element/form/elInputNumber.js":Ge,"./element/form/elRadioGroup.js":Ze,"./element/form/elRate.js":Xe,"./element/form/elSelect.js":Qe,"./element/form/elSlider.js":et,"./element/form/elSwitch.js":lt,"./element/form/elTimePicker.js":ot,"./element/form/elTimeSelect.js":rt,"./element/form/elUpload.js":st};for(const kl in ct)dt.form.eles.push(ct[kl].default);ct={"./element/base/elButton.js":Ue,"./element/base/elDivider.js":ze,"./element/base/elRow.js":Te,"./element/base/elScrollbar.js":Be};for(const kl in ct)dt.base.eles.push(ct[kl].default);const mt=n({name:"PagePanel",emits:["addComponent"],props:{formId:{type:String,default:"form_"},idGlobal:{type:Number,default:1}},setup(e,t){o(1);const{copy:l,onEnd:a}=function(e){return{copy:function(t){let l=Q(t);return console.log("fieldName",l),l.__ID=H(),"fieldName"in l.attrs&&(l.attrs.fieldName.__val__=l.__ID),l.__formId=e.formId,l},onEnd:function(e){}}}(e),n=[];for(let o in dt)for(let e of dt[o].eles)n.push(e);return{elements:dt,onEnd:a,copy:l,addComponent:function(e){t.emit("addComponent",l(e))},_eles:n}}});r("data-v-440db840");const pt={class:"components-list"},ft=["onClick"],_t={class:"components-body"};i(),mt.render=function(e,t,l,a,o,n){const r=s("el-divider"),i=s("svg-icon"),p=s("draggable");return f(),u("div",pt,[_("div",null,[(f(!0),u(m,null,g(e.elements,((t,l)=>(f(),u(m,{key:l},[d(r,null,{default:c((()=>[v(b(t.title),1)])),_:2},1024),d(p,{class:"components-draggable",list:t.eles,group:{name:"componentsGroup",pull:"clone",put:!1},clone:e.copy,draggable:".components-item",sort:!1,onEnd:e.onEnd},{default:c((()=>[(f(!0),u(m,null,g(t.eles,((t,l)=>(f(),u("div",{key:l,class:"components-item",onClick:l=>e.addComponent(t)},[_("div",_t,[d(i,{"icon-class":t.tagIcon},null,8,["icon-class"]),v(" "+b(t.name),1)])],8,ft)))),128))])),_:2},1032,["list","clone","onEnd"])],64)))),128))])])},mt.__scopeId="data-v-440db840";const gt={default(e){let t=[];for(let l of e.opts){let a={},o={};for(let t in e.__child.keyValue)"__default__"==e.__child.keyValue[t]?o.default=l[t]:a[e.__child.keyValue[t]]=l[t];let n={tag:e.__child.tag,attrs:a,slots:o};t.push(n)}return t}},ht=function(e,t){if(!ee(e))return null;const l={input_text:{childrens:[],tag:"el-input",attrs:{type:"text"},formItem:{},slots:{}},input_icon:{childrens:[],tag:"input-icon",attrs:{},formItem:{},slots:{}},input_number:{childrens:[],tag:"el-input-number",attrs:{type:"number"},formItem:{},slots:{}},input_range:{childrens:[],tag:"el-slider",attrs:{type:"number"},formItem:{},slots:{}},input_radio:{childrens:[],tag:"el-radio-group",attrs:{},formItem:{},slots:{}},input_select:{childrens:[],tag:"el-select",attrs:{},formItem:{},slots:{}},input_opt:{childrens:[],tag:"option-input",attrs:{},slots:{}},input_boolean:{childrens:[],tag:"el-switch",attrs:{"active-value":!0,"inactive-value":!1},formItem:{},slots:{}}};let a=e.input_type;e.input_type in l==0&&(a="input_text");let o=l[a];for(let n in e)0==["__val__","input_type","label","opts"].includes(n)&&(o.attrs[n]=e[n]);return"__child"in e?o.childrens=gt.default(e):0===Object.keys(o.slots).length&&delete o.slots,o.formItem={showLabel:!0,label:e.label,labelWidth:e.labelWidth?e.labelWidth:void 0},o.defaultvalue=e.__val__,o.eleName=t,o},bt=function(e){const t=[];t.push({tag:"el-divider",slots:{default:"form item"}});for(let l in e.formItem){let a=e.formItem[l];t.push(ht(a,l))}t.push({tag:"el-divider",slots:{default:"属性"}}),"__text"in e&&t.push(ht(e.__text,"__text"));for(let l in e.attrs){let a=e.attrs[l];t.push(ht(a,l))}return t.push(ht(e.__opt__,"__opt__")),t};const vt=n({name:"RulesInput",emits:["update:modelValue"],components:{CircleCloseFilled:j},props:["modelValue","defaultvalue","fieldName"],setup(e,t){console.log(e);const a=o(null),n=l(Q(N(e.modelValue))),r=function(){t.emit("update:modelValue",n)};return{data:n,addItem:function(){e.fieldName in n==0&&(n[e.fieldName]=[]),n[e.fieldName].push({id:H(),pattern:"",message:"请输入正确内容",trigger:"blur"}),(async()=>{await p(),a.value.$el.scrollIntoView()})()},save:r,querySearch:function(e,t){t([{title:"Email",value:"^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+",msg:"请输入正确的 Email"},{title:"身份证",value:"^[1-9]d{5}(18|19|([23]d))d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)d{3}[0-9Xx]$",msg:"请输入正确的身份证号码"},{title:"URL",value:"^((https?|ftp|file)://)?([da-z.-]+).([a-z.]{2,6})([/w .-]*)*/?$",msg:"请输入正确的URL"},{title:"电话号码",value:"^((d{3,4}-)|d{3.4}-)?d{7,8}$",msg:"请输入正确的电话号码"},{title:"必须是中文",value:"^[\\u4e00-\\u9fa5]{0,}$",msg:"必须是中文"}])},handleSelect:function(e,t){console.log(t,e)},del:function(t){n[e.fieldName].splice(n[e.fieldName].findIndex((e=>e.id===t)),1),r()},btn:a}}});r("data-v-42bc2a71");const yt=v("添加规则"),kt={class:"tool"},It=v("保存");i(),vt.render=function(e,t,l,a,o,n){const r=s("el-button"),i=s("el-form-item"),p=s("el-autocomplete"),h=s("el-input"),y=s("circle-close-filled"),k=s("el-icon"),w=s("el-card"),V=s("el-form");return f(),I(V,{"label-position":"left","label-width":"100px"},{default:c((()=>[d(i,null,{default:c((()=>[d(r,{size:"mini",onClick:C(e.addItem,["prevent"])},{default:c((()=>[yt])),_:1},8,["onClick"])])),_:1}),(f(!0),u(m,null,g(e.data[e.fieldName],((t,l)=>(f(),I(w,{style:{margin:"10px 5px"},key:"c"+l,class:"_box"},{default:c((()=>[d(i,{label:"表达式",size:"mini"},{default:c((()=>[d(p,{modelValue:t.pattern,"onUpdate:modelValue":e=>t.pattern=e,"fetch-suggestions":e.querySearch,class:"inline-input",placeholder:"输入验证正则表达式",onSelect:l=>e.handleSelect(t)},{default:c((({item:e})=>[v(b(e.title),1)])),_:2},1032,["modelValue","onUpdate:modelValue","fetch-suggestions","onSelect"])])),_:2},1024),d(i,{label:"错误提示",size:"mini"},{default:c((()=>[d(h,{modelValue:t.message,"onUpdate:modelValue":e=>t.message=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),d(i,{label:"触发事件",size:"mini"},{default:c((()=>[d(h,{modelValue:t.trigger,"onUpdate:modelValue":e=>t.trigger=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),_("span",kt,[d(k,{size:20,onClick:l=>e.del(t.id)},{default:c((()=>[d(y)])),_:2},1032,["onClick"])])])),_:2},1024)))),128)),e.fieldName in e.data&&e.data[e.fieldName].length>0?(f(),I(i,{key:0},{default:c((()=>[d(r,{size:"mini",onClick:C(e.save,["prevent"]),ref:"btn"},{default:c((()=>[It])),_:1},8,["onClick"])])),_:1})):S("",!0)])),_:1})},vt.__scopeId="data-v-42bc2a71";const wt=n({components:{ElementRender:pe,RulesInput:vt},name:"page-setting",props:["modelValue"],emits:["update:modelValue"],setup(e,t){const l=y("deleteItem"),n=o("form"),r=k((()=>{let t=le(e.modelValue.drawingList,e.modelValue.current);if(t)return n.value="field",t}));a(e.modelValue.drawingList,(function(){t.emit("update:modelValue",e.modelValue)}));const i=N(e.modelValue.formConf.attrs);return{currentTab:n,eleRenderFormat:ht,eleRenderSetFormat:bt,currentItem:r,formConf:i,updateEleSet:function(t,l){console.log(t,l,"updateEleSet");let a=le(e.modelValue.drawingList,e.modelValue.current);if(l in a)a[l].__val__=t;else for(let e of["formItem","attrs"])if(a[e]&&l in a[e])return void(a[e][l].__val__=t)},deleteItem:l}}}),Vt={class:"right-board"},xt={class:"field-box"},Dt=v("验证规则"),St=v("删除"),Ct={class:"field-box"};wt.render=function(e,t,l,a,o,n){const r=s("el-button"),i=s("el-form-item"),p=s("element-render"),h=s("el-form"),y=s("el-divider"),k=s("rules-input"),V=s("el-scrollbar"),x=s("el-tab-pane"),D=s("el-tabs");return f(),u("div",Vt,[d(D,{modelValue:e.currentTab,"onUpdate:modelValue":t[2]||(t[2]=t=>e.currentTab=t),class:"center-tabs"},{default:c((()=>[d(x,{label:"组件属性",name:"field"},{default:c((()=>[_("div",xt,[d(V,{class:"right-scrollbar"},{default:c((()=>[e.currentItem?(f(),u(m,{key:0},[d(h,{ref:"form2",size:"mini","label-position":"top","label-width":"80px"},{default:c((()=>[(f(!0),u(m,null,g(e.currentItem.actions,((t,l)=>(f(),I(i,{key:l},{default:c((()=>[d(r,{onClick:l=>t(e.currentItem)},{default:c((()=>[v(b(l),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128)),(f(!0),u(m,null,g(e.eleRenderSetFormat(e.currentItem),((t,l)=>(f(),I(p,w({key:l+"-"+e.currentItem.__ID,onUpdate:e.updateEleSet},t),null,16,["onUpdate"])))),128))])),_:1},512),e.currentItem.__openRules?(f(),u(m,{key:0},[d(y,null,{default:c((()=>[Dt])),_:1}),"draggable"!=e.currentItem.tag?(f(),I(k,{key:0,fieldName:e.currentItem.attrs.fieldName.__val__,modelValue:e.modelValue.formConf.__rules,"onUpdate:modelValue":t[0]||(t[0]=t=>e.modelValue.formConf.__rules=t)},null,8,["fieldName","modelValue"])):S("",!0)],64)):S("",!0),d(r,{type:"primary",size:"mini",onClick:t[1]||(t[1]=t=>e.deleteItem(e.currentItem.__ID))},{default:c((()=>[St])),_:1})],64)):S("",!0)])),_:1})])])),_:1}),d(x,{label:"表单属性",name:"form"},{default:c((()=>[_("div",Ct,[d(V,{class:"right-scrollbar"},{default:c((()=>[d(h,{ref:"form",size:"mini","label-position":"top","label-width":"80px"},{default:c((()=>[(f(!0),u(m,null,g(e.formConf,((t,l)=>(f(),u(m,{key:l},[v(b(l)+" ",1),d(p,w({onUpdate:t=>{e.modelValue.formConf.attrs[l].__val__=t}},e.eleRenderFormat(t)),null,16,["onUpdate"])],64)))),128))])),_:1},512)])),_:1})])])),_:1})])),_:1},8,["modelValue"])])};class jt{constructor(){this.__data=[]}add(e){this.__data.indexOf(e)>-1||this.__data.push(e)}data(){return this.__data}}class Nt{constructor(e){this.importFuncVue=new jt,this.importString=new jt,this.UIData=new jt,this.formData=new jt,this.APIData=new jt,this.returnData=new jt,this.rules=!1}addRules(e){this.rules=e}addUiDataFromApi(e,t,l){this.UIData.add(l),this.importString.add('import {Api} from "@/api"; '),this.APIData.add(`\n        Api.${t}("${e}").then(res=>{\n            UIData.${l}=res.data.data;\n        });\n        `)}renderImport(e){let t=this.importFuncVue.data().join(",");return e.push(`import {${t}} from "vue";`),e.concat(this.importString.data())}renderFormData(e){this.importFuncVue.add("reactive");let t={};return this.formData.data().forEach((e=>{console.log(e),t[e[0]]=e[1]})),e.push(`const formData=reactive(${JSON.stringify(t)});`),this.returnData.add("formData"),e}renderUIData(e){this.importFuncVue.add("reactive");let t={};return this.UIData.data().forEach((e=>{t[e]=""})),e.push(`const UIData=reactive(${JSON.stringify(t)});`),this.returnData.add("UIData"),e}renderApiScript(e){return e.concat(this.APIData.data().join("\n"))}renderFormRules(e){if(0==this.rules)return e;for(let l in this.rules)this.rules[l]=Object.values(this.rules[l]);this.returnData.add("rules");let t=JSON.stringify(this.rules,((e,t)=>"pattern"==e?`--${t}--`:t));return t=t.replace(/\-\-"/g,"/").replace(/"\-\-/g,"/"),e.push(`const rules=${t}`),e}renderSetup(e){e.push("setup(props, context) {"),e=this.renderFormData(e),e=this.renderUIData(e),e=this.renderApiScript(e),e=this.renderFormRules(e);let t=this.returnData.data().join(",");return e.push(` return { ${t} }`),e.push("},"),e}renderEnd(e){return e.push("});"),e}render(){this.importFuncVue.add("defineComponent"),this.importFuncVue.add("ref");let e=[""];return e.push("export default defineComponent({"),e.push('name: "formpage",'),e=this.renderSetup(e),e=this.renderEnd(e),e[0]=this.renderImport([]).join("\n"),e.join("\n")}}const Ut=function(e){let t=new RegExp("([A-Z]{1,1})");return e.replace(t,"-$1").toLowerCase()},Lt=function(e){const t={};for(let l in e)"object"==typeof e[l]?"__val__"in e[l]?t[l]=e[l].__val__:t[l]=Lt(e[l]):t[l]=e[l];return t},zt={FormData:"formData",default(e,t){return"__"==e.substr(0,2)?"":t?"boolean"==typeof(l=t)||["true","false"].indexOf(l)>-1?(console.log(e,"=----"),`:${Ut(e)}="${t}"`):`${Ut(e)}="${t}"`:"";var l},__formRef:e=>"",__formModel:e=>(zt.FormData=e,`:model="${e}"`),fieldName:e=>`v-model="${zt.FormData}.${e}"`,style(e){let t=[];for(let l in e)t.push(`${Ut(l)}:${e[l]}`);return`style="${t.join(";")}"`}},Ot=function(e,t){e=Object.assign({},e,t);let l=[];for(let a in e)a in zt?l.push(zt[a](e[a])):l.push(zt.default(a,e[a]));return l.join(" ")},Rt=function(e){let t=[];for(let l in e)e[l]&&t.push(`<template slot="${l}">${e[l]}</template>`);return t.join("")},Tt=function(e,t){if(!e)return"";return(e=Object.values(e)).map((function(e){return Bt(e,t)})).join(" ")},$t={dynamic:{default:function(e,t,l){let a=[],o={props:{}};return o.tag=t.tag,o.attrs={":label":"item.value","v-for":`item in UIData.${e}`,":key":"item.key"},o.slots={default:"{{item.key}}"},a.push(o),a},"el-option":function(e,t,l){let a=[],o={props:{}};return o.tag=t.tag,o.attrs={":value":"item.value",":label":"item.key","v-for":`item in UIData.${e}`,":key":"item.key"},a.push(o),a}},static:{default:function(e,t,l){let a=[];for(let o of l){let e={props:{}};e.tag=t.tag,e.attrs={label:o.value},e.slots={default:o.key},a.push(e)}return a},"el-option":function(e,t,l){let a=[];for(let o of l){let e={props:{}};e.tag=t.tag,e.attrs={value:o.value,label:o.key},a.push(e)}return a}}},Bt=function(e,t){e.attrs.fieldName&&t.formData.add([e.attrs.fieldName,e.defaultvalue]),e.__rules&&(t.addRules(Q(e.__rules)),e.attrs[":rules"]="rules");let l="component"in e.props?e.props.component:e.tag;if("__text"in e&&(e.slots.default=e.__text),"__opt__"in e){0==te(e.childrens)&&(e.childrens=[]);let l=function(e,t,l){let a="static"==t.type?t.staticData:t.dynamicData,o=t.tag in $t[t.type]?$t[t.type][t.tag]:$t[t.type].default;return"dynamic"==t.type&&l.addUiDataFromApi(a.url,a.medth,e),o(e,t,a)}(e.attrs.fieldName,e.__opt__,t);e.childrens=e.childrens.concat(l)}let a=["<",l," ",Ot(e.attrs,e.props)," ",">\n",Tt(e.childrens,t),Rt(e.slots),"</",l,">\n"];return e.formItem&&(a=["<","el-form-item"," ",Ot(e.formItem,{prop:e.attrs.fieldName})," ",">",a.join(""),"</","el-form-item",">"]),a.join("")},Et=function(e){let t=(e=Lt(e)).formConf;console.log(t),t.childrens=e.drawingList;const l=new Nt;let a=Bt(t,l);return["<template>",U.exports.html_beautify(a),"</template>","<script>",U.exports.js_beautify(l.render()),"<\/script>"].join("\n")};const Mt=n({name:"PageGenerator",props:{},components:{PagePanel:mt,PageDrawer:ge,PageSetting:wt,DocumentCopy:L,Iphone:z,Monitor:O,VideoPlay:R,Delete:T,Download:$},setup(e){const n=o("pc"),r=o(!1),i=o(""),s=l(function(){let e=localStorage.getItem("settings");return e?JSON.parse(e):{current:"",formConf:ut,drawingList:[]}}()),u=function(e,t){for(let l of e){if(l.__ID==t)return e.splice(e.indexOf(l),1),!0;if(te(l.childrens)&&u(l.childrens,t))return!0}},d=function(e,t){for(let a of e){if(a.__ID==t){const t=Q(a);return t.__ID=H(),e.push(l(t)),!0}if(te(a.childrens)&&d(a.childrens,t))return!0}},{toClipboard:c}=B();return a(s,(()=>{console.log(s),localStorage.setItem("settings",JSON.stringify(s))})),E("copyItem",(function(e){d(s.drawingList,e)})),E("deleteItem",(function(e){u(s.drawingList,e)})),E("selected",(function(e){s.current=e})),E("updateChild",(function(e,t){le(s.drawingList,t).childrens=e})),E("hightLight",(function(e){return s.current==e?{border:"1px solid #ffc92fde",backgroundColor:"#e4ff0024"}:{}})),E("updateDefaultValue",(function(e,t){le(s.drawingList,t).defaultvalue=e})),{settings:s,update:function(e){s.formConf=e.formConf,s.drawingList=e.drawingList},device:n,clearn:function(){localStorage.removeItem("settings"),s.current="",s.formConf=ut,s.drawingList=[]},preview:i,generate:Et,execDownload:function(e){const t=Et(s),l=new Blob([t],{type:"text/plain;charset=utf-8"});M.exports.saveAs(l,e)},showCode:r,preViewCode:function(){r.value=!0},ClipboardWrite:async()=>{const e=Et(s);try{await c(e),t.success("复制成功！"),console.log("Copied to clipboard")}catch(l){console.error(l)}}}}}),Ft={class:"container"},At={class:"left-board"},Wt=_("div",{class:"logo-wrapper"},[_("div",{class:"logo"},[v(" Vue3 Form Generator "),_("a",{class:"github",href:"https://github.com/yupk/form-generator-vue3",target:"_blank"},[_("img",{src:"https://github.githubassets.com/pinned-octocat.svg",alt:""})])])],-1),Pt=_("div",{class:"components-list"},null,-1),qt={class:"center-board"},Gt={class:"action-bar"},Jt=v("生成 "),Zt=v("清空 "),Kt={class:"btn"},Xt={class:"btn"},Ht={class:"preview-action-bar"},Qt=v("下载代码 "),Yt=v("复制代码 "),el=v("        "),tl=v("\r\n    ");Mt.render=function(e,t,l,a,o,n){const r=s("page-panel"),i=s("el-scrollbar"),p=s("video-play"),g=s("el-icon"),v=s("delete"),y=s("el-switch"),k=s("page-drawer"),I=s("page-setting"),w=s("download"),V=s("document-copy"),x=s("el-drawer"),D=F("highlight");return f(),u(m,null,[_("div",Ft,[_("div",At,[Wt,d(i,{class:"left-scrollbar"},{default:c((()=>[d(r,{onAddComponent:t[0]||(t[0]=t=>{e.settings.drawingList.push(t)})}),Pt])),_:1})]),_("div",qt,[_("div",Gt,[_("div",{class:"btn",onClick:t[1]||(t[1]=(...t)=>e.preViewCode&&e.preViewCode(...t))},[d(g,null,{default:c((()=>[d(p)])),_:1}),Jt]),_("div",{class:"btn",onClick:t[2]||(t[2]=t=>e.clearn())},[d(g,null,{default:c((()=>[d(v)])),_:1}),Zt]),_("div",Kt,[d(y,{modelValue:e.device,"onUpdate:modelValue":t[3]||(t[3]=t=>e.device=t),"active-text":"电脑模式","inactive-text":"手机模式","active-value":"pc","inactive-value":"mobile"},null,8,["modelValue"])]),_("div",Xt,[d(y,{modelValue:e.preview,"onUpdate:modelValue":t[4]||(t[4]=t=>e.preview=t),"active-text":"开发模式","inactive-text":"预览模式","active-value":"","inactive-value":"preview"},null,8,["modelValue"])])]),d(i,{class:h(["center-scrollbar",[e.device,e.preview]])},{default:c((()=>[d(k,{"model-value":e.settings,"onUpdate:modelValue":e.update},null,8,["model-value","onUpdate:modelValue"])])),_:1},8,["class"])]),d(I,{"model-value":e.settings,"onUpdate:modelValue":e.update,style:{"padding-left":"10px"}},null,8,["model-value","onUpdate:modelValue"])]),d(x,{modelValue:e.showCode,"onUpdate:modelValue":t[7]||(t[7]=t=>e.showCode=t),direction:"rtl",size:"50%",style:{height:"100%"}},{title:c((()=>[_("div",Ht,[_("div",{class:"btn",onClick:t[5]||(t[5]=t=>e.execDownload("test.vue"))},[d(g,null,{default:c((()=>[d(w)])),_:1}),Qt]),_("div",{class:"btn",onClick:t[6]||(t[6]=t=>e.ClipboardWrite())},[d(g,null,{default:c((()=>[d(V)])),_:1}),Yt])])])),default:c((()=>[A(d(i,{height:"600px"},{default:c((()=>[_("pre",null,[el,_("code",null," "+b(e.generate(e.settings)),1),tl])])),_:1},512),[[D]])])),_:1},8,["modelValue"])],64)};const ll={components:{PageGenerator:Mt},setup:()=>({})};ll.render=function(e,t,l,a,o,n){const r=s("page-generator");return f(),I(r,{device:"pc"})};const al={name:"SvgIcon",props:{iconClass:{type:String,required:!0},className:{type:String,default:""}},computed:{isExternal(){return e=this.iconClass,/^(https?:|mailto:|tel:)/.test(e);var e},iconName(){return`#icon-${this.iconClass}`},svgClass(){return this.className?`svg-icon ${this.className}`:"svg-icon"},styleExternalIcon(){return{mask:`url(${this.iconClass}) no-repeat 50% 50%`,"-webkit-mask":`url(${this.iconClass}) no-repeat 50% 50%`}}}};r("data-v-223b99ae");const ol=["xlink:href"];i(),al.render=function(e,t,l,a,o,n){return n.isExternal?(f(),u("div",w({key:0,style:n.styleExternalIcon,class:"svg-external-icon svg-icon"},x(e.$attrs)),null,16)):(f(),u("svg",w({key:1,class:n.svgClass,"aria-hidden":"true"},x(e.$attrs)),[_("use",{"xlink:href":n.iconName},null,8,ol)],16))},al.__scopeId="data-v-223b99ae";const nl=n({name:"DraggableWarp",emits:["update:modelValue"],props:{modelValue:Array},setup(e,t){const l=o(e.modelValue);return{vm:l,ini:{style:{"min-height":"60px"},component:"div",group:"componentsGroup",class:"drag-wrapper box",animation:340,filter:".btn"},update:function(e){console.log(e),l.value=e,t.emit("update:modelValue",e)}}}});nl.render=function(e,t,l,a,o,n){const r=s("draggable"),i=s("el-col");return f(),I(i,W(P(e.$attrs)),{default:c((()=>[d(r,w(e.ini,{modelValue:e.vm,"onUpdate:modelValue":e.update}),{default:c((()=>[q(e.$slots,"default")])),_:3},16,["modelValue","onUpdate:modelValue"])])),_:3},16)};const rl=n({name:"OptionInput",emits:["update:modelValue"],props:["modelValue","defaultvalue"],setup(e,t){e.modelValue;const n=o(e.modelValue.type),r=l(Q(e.modelValue.staticData)),i=l(Q(e.modelValue.dynamicData));return a([i,r,n],(()=>{console.log(n.value),t.emit("update:modelValue",{type:n.value,tag:e.modelValue.tag,staticData:r,dynamicData:i})})),{staticData:r,addItem:function(){r.push({key:"",value:""})},delItem:function(e){r.splice(e,1)},dynamicData:i,current:n}}}),il=_("i",{class:"el-icon-delete"},null,-1),sl=v("添加");rl.render=function(e,t,l,a,o,n){const r=s("el-input"),i=s("el-form-item"),p=s("el-col"),_=s("el-row"),h=s("el-button"),b=s("el-form"),v=s("el-tab-pane"),y=s("el-option"),k=s("el-select"),w=s("el-tabs");return f(),I(w,{type:"border-card",modelValue:e.current,"onUpdate:modelValue":t[4]||(t[4]=t=>e.current=t)},{default:c((()=>[d(v,{label:"静态数据",name:"static"},{default:c((()=>[d(b,{size:"small"},{default:c((()=>[d(i,null,{default:c((()=>[d(_,null,{default:c((()=>[(f(!0),u(m,null,g(e.staticData,((t,l)=>(f(),u(m,{key:"index"+l},[d(p,{span:11},{default:c((()=>[d(i,{label:"选项名",rules:{required:!0,message:"不能为空",trigger:"blur"}},{default:c((()=>[d(r,{modelValue:t.key,"onUpdate:modelValue":e=>t.key=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024),d(p,{span:11},{default:c((()=>[d(i,{label:"选项值",rules:{required:!0,message:"不能为空",trigger:"blur"}},{default:c((()=>[d(r,{modelValue:t.value,"onUpdate:modelValue":e=>t.value=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024),d(p,{span:1,offset:1,onClick:t=>e.delItem(l)},{default:c((()=>[il])),_:2},1032,["onClick"])],64)))),128))])),_:1})])),_:1}),d(i,null,{default:c((()=>[d(h,{size:"mini",onClick:C(e.addItem,["prevent"])},{default:c((()=>[sl])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),d(v,{label:"动态数据",name:"dynamic"},{default:c((()=>[d(b,{size:"small"},{default:c((()=>[d(i,{label:"接口地址"},{default:c((()=>[d(r,{placeholder:"请输入接口地址",modelValue:e.dynamicData.url,"onUpdate:modelValue":t[1]||(t[1]=t=>e.dynamicData.url=t),class:"input-with-select"},{prepend:c((()=>[d(k,{modelValue:e.dynamicData.medth,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dynamicData.medth=t),placeholder:"请选择",style:{width:"80px"}},{default:c((()=>[d(y,{label:"get",value:"get"}),d(y,{label:"post",value:"post"}),d(y,{label:"put",value:"put"})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),d(i,{label:"label键值"},{default:c((()=>[d(r,{type:"text",modelValue:e.dynamicData.keyName,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dynamicData.keyName=t)},null,8,["modelValue"])])),_:1}),d(i,{label:"value键值"},{default:c((()=>[d(r,{type:"text",modelValue:e.dynamicData.valueName,"onUpdate:modelValue":t[3]||(t[3]=t=>e.dynamicData.valueName=t)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])};const ul=n({name:"UploadWarp",emits:["update:modelValue"],props:{modelValue:Array,uploadType:String,disabled:Boolean,showFileList:{type:Boolean,default:!0},action:String,multiple:String,drag:Boolean,accept:String,thumbnailMode:Boolean,listType:{type:String,default:"picture"},autoUpload:{type:Boolean,default:!0},limit:Number,tip:{type:String}},setup(e,t){o(null);const l=o(e.modelValue||[]),a=o(""),n=o(!1),r=function(e){let a=[];for(let t of l.value)t.uid!=e.uid&&a.push(t);l.value=a,t.emit("update:modelValue",l.value)},i=function(e){a.value=e.url,n.value=!0};return{attrs:k((function(){let a={"on-success":function(a){1==e.limit&&(l.value=[]),l.value.push(a.data),t.emit("update:modelValue",l.value)}};return"avatar"==e.uploadType?a.showFileList=!1:a.showFileList=!0,a["on-preview"]=i,a["on-remove"]=r,Object.assign(a,{disabled:e.disabled,showFileList:e.showFileList,action:e.action,multiple:e.multiple,name:e.name,drag:e.drag,accept:e.accept,thumbnailMode:e.thumbnailMode,listType:e.listType,autoUpload:e.autoUpload,limit:e.limit})})),files:l,dialogImageUrl:a,dialogVisible:n}}});r("data-v-4df4aadc");const dl=["src"],cl={key:1,class:"el-icon-plus avatar-uploader-icon"},ml={key:1,class:"el-icon-upload"},pl={class:"el-upload__text",style:{"font-size":"14px"}},fl={key:0},_l=_("em",null,"点击上传",-1),gl={key:0,class:"el-upload__tip"},hl=v("Click to upload"),bl={class:"el-upload__tip"},vl=["src"];i(),ul.render=function(e,t,l,a,o,n){const r=s("el-upload"),i=s("el-button"),p=s("el-dialog");return f(),u(m,null,["image"==e.uploadType?(f(),I(r,w({key:0,class:"avatar-uploader"},e.attrs,{"file-list":e.files}),{default:c((()=>[1==e.attrs.limit?(f(),u(m,{key:0},[e.files.length>0?(f(!0),u(m,{key:0},g(e.files,(e=>(f(),u("img",{src:e.url,class:"avatar",key:e.url},null,8,dl)))),128)):(f(),u("i",cl))],64)):(f(),u("i",ml,[_("div",pl,[e.drag?(f(),u("span",fl," 拖拽或者 ")):S("",!0),_l]),e.tip?(f(),u("div",gl,b(e.tip),1)):S("",!0)]))])),_:1},16,["file-list"])):"file"==e.uploadType?(f(),I(r,W(w({key:1},e.attrs)),{tip:c((()=>[_("div",bl,b(e.tip),1)])),default:c((()=>[d(i,{size:"small",type:"primary"},{default:c((()=>[hl])),_:1})])),_:1},16)):S("",!0),d(p,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dialogVisible=t)},{default:c((()=>[_("img",{style:{width:"100%"},src:e.dialogImageUrl,alt:""},null,8,vl)])),_:1},8,["modelValue"])],64)},ul.__scopeId="data-v-4df4aadc";const yl=G(ll);yl.use(J,{locale:Z}),yl.component("draggable",K),yl.component("draggable-warp",nl),yl.component("option-input",rl),yl.component("svg-icon",al),yl.component("upload-warp",ul),yl.directive("highlight",(function(e){let t=e.querySelectorAll("pre code");setTimeout((()=>{t.forEach((e=>{X.highlightBlock(e)}))}),200)})),yl.mount("#app");
